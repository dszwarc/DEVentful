{% extends 'base.html' %}
{% block content %}
<div class="container">
    <div class="row">
      <div class="col-md-6">
        <h2 style="font-size: 60px;text-align: center;">{{ event.event_name }}'s Details</h2>

        <div class="card" style="width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column; text-align: center; font-size: larger;">
            <div class="card-body">
                
                <p><strong style="text-decoration: underline; font-size: large;">Date: </strong> {{ event.event_date }}</p>
                <p><strong style="text-decoration: underline; font-size: large;">Location: </strong> {{ event.location }}</p>
                <p><strong style="text-decoration: underline; font-size: large;">Type: </strong> {{ event.get_event_type_display }}</p>
                <p><strong style="text-decoration: underline; font-size: large;">Description:</strong> {{ event.description }}</p>
                <p><strong style="text-decoration: underline; font-size: large;">Total Cost: </strong>{{ total_cost }}</p>
            </div>
            <div class="card-action">
                <a class="waves-effect waves-light btn black" href="{% url 'event_update' event.id %}">Edit</a>
                <a  class=" waves-effect waves-light btn black" href="{% url 'event_delete' event.id %}">Delete</a>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <iframe
            width="180%"
            height="600px"
            style="border:0"
            loading="lazy"
            allowfullscreen
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDaYfi9oyToekXnn6qxxwh23YJKToCqB5Q
                &q={{query}}">
        </iframe>
    </div>
    </div>
    <div class="row">
        <div class="col-md-12" style="margin-top: 90px;">
        <h2 style="font-size:40px; text-align: center; ">{{ event.event_name }}'s Vendors</h2>
        {% if event.vendor_set.all.count %}
        {% for vendor in event.vendor_set.all %}
        <a href="{% url 'vendor_detail' vendor.id %}">
            
                
                <div class="card-content" style="color: black; font-size: medium;background-color: antiquewhite;flex: 1;
                padding: 16px;width: 100%; text-align: center; margin-bottom: 10px;margin-top: 50px;
  height: 100%;
  display: flex;
  flex-direction: column;">
  
                    <span class="card-title">{{ vendor.vendor_name }}</span>
                    <p > <strong style="text-decoration: underline; font-size: large;"> Category: </strong> {{ vendor.get_category_display }} </p>
                    <p> <strong style="text-decoration: underline; font-size: large;">Description: </strong>{{ vendor.description }}</p>
                </div></a>
                <form action="{% url 'disassoc_vendor' vendor.id event.id %}" method="POST">
                    {% csrf_token %}
                    <input type="submit" class="btn" value="Remove Vendor" style="background-color: black; align-items: center;width: 280px;">
                </form>
            </div>
        
        {% endfor %}
        {% else %}
        <h5>No Vendors :(</h5>
        {% endif %}
    </div>
</div>
</div>
</div>
<script>

    const dateEl = document.querySelector('#id_event_date');
    M.Datepicker.init(dateEl, {
        format: 'yyyy-mm-dd', // this how django formats the date in the model
        defaultDate: new Date(),
        setDefaultDate: true,
        autoClose: true
    })

</script>
    
    
{% endblock %}